<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
<div id="app">
    <el-table :data="tableData"  border height="200" :summary-method="getSummaries" show-summary style="width: 100%">
        <!--        <el-table-column type="index" :index="indexMethod"></el-table-column>-->
        <el-table-column prop="goodsNo" label="商品国际码"></el-table-column>
        <el-table-column prop="goodsName" label="商品名称"></el-table-column>
        <el-table-column prop="orderTime" label="订单日期"></el-table-column>
        <el-table-column prop="goodsNum" label="采购数量"></el-table-column>
        <el-table-column prop="goodsPrice" label="采购单价(元)"></el-table-column>
        <el-table-column prop="requiredSendPrice" label="销售价(元)"></el-table-column>
        <el-table-column prop="discountRateStr" label="折扣率"></el-table-column>
        <el-table-column prop="goodsAmount" label="采购金额(元)"></el-table-column>
        <el-table-column prop="arrivalAmount" label="销售金额(元)"></el-table-column>
        <el-table-column prop="payAmount" label="本次付款金额(元)"></el-table-column>
        <el-table-column prop="pledge" label="毛利率"></el-table-column>
    </el-table>
</div>
</body>
<!-- import Vue before Element -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/axios/0.19.0-beta.1/axios.min.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script>
    new Vue({
        el: '#app',
        data() {
            return {
                flag: true,
                seen: false,
                domain: 'http://localhost:9090/',
                tableData: [
                    {

                        id: 87,
                        payAmount: 1520.00000000,
                        saleAmount: 0.00,
                        grossProfitRateStr: '0.00%',
                        barCode: 7.8263702363E10,
                        unit: '瓶 : 箱 = 1 : 24',
                        orderTotalNum: 13.00000000,
                        orderTotalAmount: 3120.00000000,
                        arrivalAmount: 0.00,
                        paidAmount: 1520.00000000,
                        paymentAmount: 1520.00000000,
                        goodsNum: 8.00000000,
                        goodsPrice: 190.00000000,
                        goodsAmount: 1520.00000000,
                        goodsName: '1664桃红',
                        requiredSendPrice: 0.00,
                        discountRateStr: '0.00%'
                    },
                    {

                        id: 86,
                        payAmount: 1600.00000000,
                        saleAmount: 0.00,
                        grossProfitRateStr: '0.00%',
                        barCode: 7.8263702363E10,
                        unit: '瓶 : 箱 = 1 : 24',
                        orderNo: 'PO19082700003',
                        orderTotalNum: 13.00000000,
                        orderTotalAmount: 3120.00000000,
                        arrivalAmount: 0.00,
                        paidAmount: 1600.00000000,
                        paymentAmount: 1600.00000000,
                        goodsNum: 5.00000000,
                        goodsPrice: 320.00000000,
                        goodsAmount: 1600.00000000,
                        goodsName: '45度竹叶青',
                        requiredSendPrice: 0.00,
                        profitMargin: 0,
                        inDiscountAmount: 1600.00000000,
                        discountRateStr: '0.00%'
                    }
                ]
            }
        },
        mounted() {
            this.payPoRelationDetail();
        },
        methods: {
            payPoRelationDetail() {
                const url = this.domain + "pay/payPoRelationDetail";
                axios.get(url, {
                    params: {
                        payId: 64
                    }
                })
                    .then((response) => {
                        console.log(response);
                        this.tableData = response.data.data.payPoRelationResDto;
                        console.log(this.tableData);
                    })
                    .catch((error) => {
                        console.log(error);
                    })
            },
            getSummaries(param) {
                const { columns, data } = param;
                const sums = [];
                columns.forEach((column, index) => {
                    if (index === 0) {
                        sums[index] = '总价';
                        return;
                    }
                    const values = data.map(item => Number(item[column.property]));
                    if (!values.every(value => isNaN(value))) {
                        sums[index] = values.reduce((prev, curr) => {
                            const value = Number(curr);
                            if (!isNaN(value)) {
                                return prev + curr;
                            } else {
                                return prev;
                            }
                        }, 0);
                        sums[index] += ' 元';
                    } else {
                        sums[index] = 'N/A';
                    }
                });

                return sums;
            }
        }
    })
</script>
</html>
