

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
<div id="app">
    <el-tabs v-model="activeName" @tab-click="handleClick">
        <el-tab-pane label="待处理" name="first">
            <div v-for="(item,i) in items">
                <h5>单据编号: {{item.poNo}}</h5>
                <h5>单据类型: {{item.poTypeName}}</h5>
                <h5>项目: {{item.projectName}}</h5>
                <h5>金额: {{item.amount}} 元</h5>
                <h5>审核状态: <el-button type="warning">{{item.stateName}}</el-button></h5>
                <h5>申请时间： {{item.proposerAt}}</h5>
                <h5>申请人: {{item.proposer}}</h5>
<!--                <el-button type="warning">{{item.stateName}}</el-button>-->
                <p style="color: #409EFF" @click="detail(item.id,item.poId,item.state)">查看详情</p>
                <hr>
            </div>
        </el-tab-pane>
        <el-tab-pane label="已处理" name="second">
            <div v-for="(deal,i) in dealOrderList">
                <h5>单据编号: {{deal.poNo}}</h5>
                <h5>单据类型: {{deal.poTypeName}}</h5>
                <h5>项目: {{deal.projectName}}</h5>
                <h5>金额: {{deal.amount}} 元</h5>
                <h5>审核状态: <span style="color: #67C23A">{{deal.stateName}}</span></h5>
                <h5>申请时间： {{deal.proposerDate}}</h5>
                <h5>申请人: {{deal.proposer}}</h5>
                <hr>
            </div>
        </el-tab-pane>
        <el-tab-pane label="抄送我" name="third">抄送我</el-tab-pane>
        <el-tab-pane label="定时任务补偿" name="fourth">定时任务补偿</el-tab-pane>
    </el-tabs>
</div>
</body>
<!-- import Vue before Element -->
<script src="https://cdn.bootcss.com/vue/2.2.2/vue.min.js"></script>
<script src="https://cdn.bootcss.com/axios/0.19.0-beta.1/axios.min.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script>
    const vm = new Vue({
        el: '#app',
        data() {
            return {
                activeName: 'first',
                items: [],
                dealOrderList: [],
                domain: 'http://localhost:9090/'
            }
        },
        mounted() {
            this.list();
        },
        methods: {
            handleClick(tab, event) {
                console.log(tab, event);
            },
            list() {
                const url = this.domain + "pay/waitingAuditOrder";
                axios.get(url)
                    .then((response) => {
                        console.log(response);
                        vm.items = response.data.data.items;
                    })
                    .catch((error) => {
                        console.log(error);
                    })
            },
            detail(id, payId, state) {
                $.cookie('payId', payId);
                $.cookie('auditId', id);
                $.cookie('state', state);
                //跳转单据详情页面
                window.location.href = this.domain + "wechat/portal/payDetail";
            },
            resolved() {
                const url = vm.domain + "pay/resolvedOrderList";
                axios.get(url)
                    .then((response) => {
                        // console.log(response);
                        // console.log(response.data.data);
                        vm.dealOrderList = response.data.data;
                        console.log(vm.dealOrderList);
                    })
                    .catch((error) => {
                        console.log(error);
                    });
            }
        }
    })
</script>
</html>

